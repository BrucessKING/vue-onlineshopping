{"remainingRequest":"/home/king/vueProjects/onlineshopping/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/king/vueProjects/onlineshopping/src/views/RoleManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/king/vueProjects/onlineshopping/src/views/RoleManage.vue","mtime":1588480674361},{"path":"/home/king/vueProjects/onlineshopping/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/king/vueProjects/onlineshopping/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/king/vueProjects/onlineshopping/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/king/vueProjects/onlineshopping/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICJyb2xlIiwKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICByb2xlczogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICAgICAgICByb2xlTmFtZTogJycsCiAgICAgICAgICAgICAgICAgICAgcm9sZURlc2M6ICcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCgogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMjogZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlMzogZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlNDogZmFsc2UsCiAgICAgICAgICAgIGZvcm1MYWJlbFdpZHRoOiAnMTIwcHgnLAogICAgICAgICAgICByb2xlOiB7CiAgICAgICAgICAgICAgICBpZDogJycsCiAgICAgICAgICAgICAgICByb2xlTmFtZTogJycsCiAgICAgICAgICAgICAgICByb2xlRGVzYzogJycKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbmV3Um9sZTogewogICAgICAgICAgICAgICAgaWQ6ICcnLAogICAgICAgICAgICAgICAgcm9sZU5hbWU6ICcnLAogICAgICAgICAgICAgICAgcm9sZURlc2M6ICcnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRyZWU6IFtdLAogICAgICAgICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgICAgICAgICAgbGFiZWw6ICdhdXRoTmFtZScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVmYXVsdEV4cGFuZGVkS2V5czogW10sCiAgICAgICAgICAgIGRlZmF1bHRDaGVja2VkS2V5czogW10sCiAgICAgICAgICAgIGN1cnJlbnRSb2xlSWQ6ICcnCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vYmlna2luZy50b3A6ODA4MC9PbmxpbmVTaG9wcGluZy9yb2xlcy8nKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnJvbGVzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmRhdGEuZGF0YSk7CiAgICAgICAgICAgIH0pCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGVkaXRSb2xlKHNjb3BlKXsKICAgICAgICAgICAgdGhpcy5yb2xlID0gc2NvcGUucm93Oy8v5oqK6L+Z5LiA6KGM55qE5L+h5oGv6LWL57uZaW5mb3JtYXRpb24KICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNjb3BlLnJvdyk7CiAgICAgICAgfSwKICAgICAgICBhZGRSb2xlKCl7CiAgICAgICAgICAgIC8vIHRoaXMubmV3Um9sZSA9IHNjb3BlLnJvdzsvL+aKiui/meS4gOihjOeahOS/oeaBr+i1i+e7mWluZm9ybWF0aW9uCiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUyID0gdHJ1ZTsKICAgICAgICB9LAogICAgICAgIGRlbFJvbGUoc2NvcGUpewogICAgICAgICAgICBheGlvcy5kZWxldGUoJ2h0dHA6Ly9iaWdraW5nLnRvcDo4MDgwL09ubGluZVNob3BwaW5nL3JvbGVzLycgKyBzY29wZS5yb3cuaWQpCiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzcG9uc2UuZGF0YS5tZXRhLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIHN1Ym1pdENoYW5nZShyb2xlKXsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICBheGlvcy5wdXQoJ2h0dHA6Ly9iaWdraW5nLnRvcDo4MDgwL09ubGluZVNob3BwaW5nL3JvbGVzLycgKyByb2xlLmlkLCByb2xlKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJvbGUpOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3BvbnNlLmRhdGEubWV0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBzdWJtaXRBZGRSb2xlKG5ld1JvbGUpewogICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdSb2xlKTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTIgPSBmYWxzZTsKICAgICAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2JpZ2tpbmcudG9wOjgwODAvT25saW5lU2hvcHBpbmcvcm9sZXMnLCBuZXdSb2xlKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1JvbGUpOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3BvbnNlLmRhdGEubWV0YS5tc2cpOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBhc3NpZ25QZXJtaXNzaW9uKHNjb3BlKXsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZTMgPSB0cnVlOwogICAgICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9iaWdraW5nLnRvcDo4MDgwL09ubGluZVNob3BwaW5nL3JpZ2h0cy90cmVlJykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy50cmVlID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9iaWdraW5nLnRvcDo4MDgwL09ubGluZVNob3BwaW5nL3JvbGVzLycgKyBzY29wZS5yb3cuaWQpCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdENoZWNrZWRLZXlzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGEucHNJZHMuc3BsaXQoJywnKTsKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFJvbGVJZCA9IHNjb3BlLnJvdy5pZDsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGVmYXVsdENoZWNrZWRLZXlzKQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc3VibWl0Q2hhbmdlUmlnaHQoY3VycmVudFJvbGVJZCl7CiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWRLZXlzID0gdGhpcy4kcmVmcy50cmVlLmdldENoZWNrZWRLZXlzKCkudG9TdHJpbmcoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hlY2tlZEtleXMpOwogICAgICAgICAgICBsZXQgZGF0YSA9IHsicmlkcyI6Y2hlY2tlZEtleXN9OwoKICAgICAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovL2JpZ2tpbmcudG9wOjgwODAvT25saW5lU2hvcHBpbmcvcm9sZXMvJyArIGN1cnJlbnRSb2xlSWQgKyAnL3JpZ2h0cycsIGRhdGEpCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEubWV0YSk7CiAgICAgICAgICAgICAgICBhbGVydChyZXNwb25zZS5kYXRhLm1ldGEubXNnKTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICB9KQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["RoleManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RoleManage.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <el-row>\n            <el-button type=\"primary\" round @click=\"addRole\">增加角色</el-button>\n        </el-row>\n        <el-table :data=\"roles\">\n            <el-table-column label=\"id\">\n                <template slot-scope=\"scope\">\n                    <span>{{scope.row.id}}</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"角色名称\">\n                <template slot-scope=\"scope\">\n                    <span>{{scope.row.roleName}}</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"角色描述\">\n                <template slot-scope=\"scope\">\n                    <span>{{scope.row.roleDesc}}</span>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"修改\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"primary\" icon=\"el-icon-edit\" circle @click=\"editRole(scope)\"/>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"删除\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"delRole(scope)\"/>\n                </template>\n            </el-table-column>\n            <el-table-column label=\"分配权限\">\n                <template slot-scope=\"scope\">\n                    <el-button type=\"warning\" round @click=\"assignPermission(scope)\">分配权限</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <el-dialog title=\"修改信息\" :visible.sync=\"dialogFormVisible\">\n            <el-form :model=\"role\">\n                <el-form-item label=\"id\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"role.id\" autocomplete=\"off\" disabled=\"disabled\"/>\n                </el-form-item>\n                <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"role.roleName\" autocomplete=\"off\"/>\n                </el-form-item>\n                <el-form-item label=\"角色描述\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"role.roleDesc\" autocomplete=\"off\"/>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitChange(role)\">确 定</el-button>\n            </div>\n        </el-dialog>\n\n\n\n        <el-dialog title=\"添加用户\" :visible.sync=\"dialogFormVisible2\">\n            <el-form :model=\"newRole\">\n                <el-form-item label=\"角色名称\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newRole.roleName\" autocomplete=\"off\"/>\n                </el-form-item>\n                <el-form-item label=\"角色描述\" :label-width=\"formLabelWidth\">\n                    <el-input v-model=\"newRole.roleDesc\" autocomplete=\"off\"/>\n                </el-form-item>\n            </el-form>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible2 = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitAddRole(newRole)\">确 定</el-button>\n            </div>\n        </el-dialog>\n\n        <el-dialog title=\"分配权限\" :visible.sync=\"dialogFormVisible3\">\n            <el-tree\n                    ref=\"tree\"\n                    :data=\"tree\"\n                    show-checkbox\n                    node-key=\"id\"\n                    :default-expand-all=\"true\"\n                    :default-checked-keys=\"defaultCheckedKeys\"\n                    :props=\"defaultProps\">\n            </el-tree>\n            <div slot=\"footer\" class=\"dialog-footer\">\n                <el-button @click=\"dialogFormVisible4 = false\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"submitChangeRight(currentRoleId)\">确 定</el-button>\n            </div>\n        </el-dialog>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"role\",\n        data() {\n            return{\n                roles: [\n                    {\n                        id: '',\n                        roleName: '',\n                        roleDesc: ''\n                    }\n                ],\n\n                dialogFormVisible: false,\n                dialogFormVisible2: false,\n                dialogFormVisible3: false,\n                dialogFormVisible4: false,\n                formLabelWidth: '120px',\n                role: {\n                    id: '',\n                    roleName: '',\n                    roleDesc: ''\n                },\n                newRole: {\n                    id: '',\n                    roleName: '',\n                    roleDesc: ''\n                },\n                tree: [],\n                defaultProps: {\n                    children: 'children',\n                    label: 'authName'\n                },\n                defaultExpandedKeys: [],\n                defaultCheckedKeys: [],\n                currentRoleId: ''\n            }\n        },\n        created() {\n            axios.get('http://bigking.top:8080/OnlineShopping/roles/')\n                .then(response => {\n                    this.roles = response.data.data.data;\n                    // console.log(response.data.data.data);\n                })\n        },\n        methods: {\n            editRole(scope){\n                this.role = scope.row;//把这一行的信息赋给information\n                this.dialogFormVisible = true;\n                // console.log(scope.row);\n            },\n            addRole(){\n                // this.newRole = scope.row;//把这一行的信息赋给information\n                this.dialogFormVisible2 = true;\n            },\n            delRole(scope){\n                axios.delete('http://bigking.top:8080/OnlineShopping/roles/' + scope.row.id)\n                    .then(response => {\n                        alert(response.data.meta.msg);\n                        location.reload();\n                    });\n            },\n            submitChange(role){\n                this.dialogFormVisible = false;\n                axios.put('http://bigking.top:8080/OnlineShopping/roles/' + role.id, role)\n                    .then(response => {\n                        // console.log(role);\n                        alert(response.data.meta.msg);\n                        location.reload();\n                    });\n            },\n            submitAddRole(newRole){\n                console.log(newRole);\n                this.dialogFormVisible2 = false;\n                axios.post('http://bigking.top:8080/OnlineShopping/roles', newRole)\n                    .then(response => {\n                        // console.log(newRole);\n                        alert(response.data.meta.msg);\n                        location.reload();\n                    });\n            },\n            assignPermission(scope){\n                this.dialogFormVisible3 = true;\n                axios.get('http://bigking.top:8080/OnlineShopping/rights/tree')\n                .then(response => {\n                    this.tree = response.data.data.data;\n                });\n                axios.get('http://bigking.top:8080/OnlineShopping/roles/' + scope.row.id)\n                .then(response => {\n                    this.defaultCheckedKeys = response.data.data.data.psIds.split(',');\n                    this.currentRoleId = scope.row.id;\n                    // console.log(this.defaultCheckedKeys)\n                })\n            },\n            submitChangeRight(currentRoleId){\n                const checkedKeys = this.$refs.tree.getCheckedKeys().toString();\n                console.log(checkedKeys);\n                let data = {\"rids\":checkedKeys};\n\n                axios.post('http://bigking.top:8080/OnlineShopping/roles/' + currentRoleId + '/rights', data)\n                .then(response => {\n                    // console.log(response.data.meta);\n                    alert(response.data.meta.msg);\n                    location.reload();\n                })\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"]}]}